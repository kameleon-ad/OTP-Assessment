# OTP Assessments

[Main C# Code](./OTP-Assessment/Prgram.cs)

### Assumptions:

- The email server used in this module is Office365.
- The SMTP port used in this module is 587.
- The OTP code generated by this module is a 6-digit number.
- The OTP code is case-insensitive.
- The input stream provided to CheckOTP() method contains a single line of text with the OTP code.
- The input stream provided to CheckOTP() method is not closed by the method.
- The OTP code is considered invalid if it does not match the OTP code generated by the module.
- The OTP code is considered expired if the CheckOTP() method is called after the OTPExpiration time.
- The CheckOTP() method will wait for a maximum of nb_tries * expireMinutes * 60 seconds to receive the OTP code from the input stream. If the OTP code is not received within this time, the method will return a STATUS_OTP_TIMEOUT status. If the OTP code is received within this time, but is invalid, the method will continue waiting for nb_tries - 1 more times, or until the OTP code is valid, or until the OTP code is expired.

### Solution:

- The module provides an Email_OPT_Module class with the following public methods:
  * Email_OPT_Module(string emailAddr, string emailPswd): constructor that takes in the email address and password of the email account that will be used to send OTP codes.
  * void Start(): Initialize some private fields and create instances of SmtpClient and MailMessage.
  * void Close(): method that does nothing.
  * EmailStatus GenerateOPTEmail(string userEmail): method that takes in the email address of the user that will receive the OTP code, generates a 6-digit OTP code, sends an email containing the OTP code to the user's email address, and returns a status indicating whether the email was sent successfully, the email address is invalid, or an error occurred.
  * async Task<OTPStatus> CheckOTP(Stream input): method that takes in a stream containing the OTP code entered by the user, waits for the OTP code to be entered, and returns a status indicating whether the OTP code was entered correctly, incorrectly, or after the OTPExpiration time.
- The module assumes that the email server used is Office365, and the SMTP port used is 587.
- The module assumes that the OTP code generated is a 6-digit number, and is case-insensitive.
- The module assumes that the input stream provided to CheckOTP() method contains a single line of text with the OTP code, and is not closed by the method.
- The module assumes that the OTP code is considered invalid if it does not match the OTP code generated by the module.
- The module assumes that the OTP code is considered expired if the CheckOTP() method is called after the OTPExpiration time.
- The module assumes that the CheckOTP() method will wait for a maximum of nb_tries * expireMinutes * 60 seconds to receive the OTP code from the input stream. If the OTP code is not received within this time, the method will return a STATUS_OTP_TIMEOUT status. If the OTP code is received within this time, but is invalid, the method will continue waiting for nb_tries - 1 more times, or until the OTP code is valid, or until the OTP code is expired.

# OTP Assessments Tests
[Test C# Code](./OTP-Assessment.Tests/Prgram.cs)

## Manual
1. To run the MSTest test code, you can follow these steps:
Build the solution: In Visual Studio, open the solution that contains the test project and build it. You can do this by selecting Build > Build Solution from the top menu or by using the keyboard shortcut Ctrl + Shift + B.
2. Open Test Explorer: Once the build is successful, open the Test Explorer window by selecting Test > Test Explorer from the top menu.
3. Run the tests: In the Test Explorer window, you should see a list of all the tests in the project. You can run all the tests by clicking the "Run All" button at the top of the window, or you can run individual tests by clicking the "Run" button next to each test.
4. View test results: After the tests have completed running, you can view the results in the Test Explorer window. Passed tests will be displayed in green, failed tests in red, and skipped tests in yellow. You can also view detailed information about each test, including any error messages or stack traces, by clicking on the test in the Test Explorer window.
5. That's it! You have successfully run the MSTest test code.

## Test Guide

### 1. Unit tests:
- You can write unit tests to verify that the individual methods of the module work as expected.
- For example, you can write a unit test to verify that the GenerateOPTEmail method returns a STATUS_EMAIL_OK status when given a valid email address, and a STATUS_EMAIL_INVALID status when given an invalid email address.
- You can also write a unit test to verify that the CheckOTP method returns a STATUS_OTP_OK status when given the correct OTP code, and a STATUS_OTP_FAIL status when given an incorrect OTP code.
### 2. Integration tests:
- You can write integration tests to verify that the module works correctly when used in a larger system.
- For example, you can write an integration test to verify that the GenerateOPTEmail method sends an email containing the OTP code to the user's email address when called from a web application or API.
- You can also write an integration test to verify that the CheckOTP method waits for the OTP code to be entered correctly, and returns the appropriate status based on the input stream.
### 3. Load testing:
- You can perform load testing to verify that the module can handle a large number of requests and emails without crashing or slowing down.
- For example, you can use a load testing tool like JMeter to simulate multiple users requesting OTP codes and entering them using the CheckOTP method.
- You can also use JMeter to simulate multiple users requesting OTP codes simultaneously and verify that the module can handle the load without errors.
### 4. Usability testing:
- You can perform usability testing to verify that the module is easy to use and understand for the end users.
- For example, you can ask a group of users to perform common tasks, such as requesting an OTP code, entering the code, and verifying the status returned by the module.
- You can also ask the users for feedback on the design and user interface of the module, and use their feedback to improve the module.
